# infra

```
    /\_____/\
   /  o   o  \
  ( ==  ^  == )
   )         (
  (           )
 ( (  )   (  ) )
(__(__)___(__)__)
```

where my servers live. they purr when healthy.

---

### the setup

hetzner cloud, provisioned with terraform, configured with nixos. everything declarative, everything reproducible. if a server explodes i can just... make another one. like a phoenix but fluffier.

secrets live in 1password. ssh keys get generated by terraform and tucked safely into the vault.

---

### what lives here

**matrix** - chat server, encrypted and private

**memos** - simple note-taking for thoughts that need saving

**firefly** - personal finance tracker, theoretically useful

**affine** - workspace for docs and planning, notion alternative

**pocket id** - clean oidc provider for single sign-on

**netbird** - wireguard-based mesh vpn with proper access control

---

### commands

`direnv allow` and you're in the shell. then:

---

### adding a new server

1. add it to `servers` in terraform.tfvars
2. `tf apply` to birth the box
3. make a home for it in `nixos/hosts/<name>/`
4. introduce it in `flake.nix`
5. `deploy <name>` to give it life

---

### notes to self

- acme certs renew automatically, stop checking on them
- the cloudflare api token needs dns edit permissions

---

_meow_
